(this["webpackJsonpmemorial-tracker-ui"]=this["webpackJsonpmemorial-tracker-ui"]||[]).push([[0],{10:function(e,a,t){e.exports={App:"App_App__coccW",loadingMessage:"App_loadingMessage__1cTxE",error:"App_error__3T6-o"}},2:function(e,a,t){e.exports={hidden:"InfoBubble_hidden__WLbN2",popUp:"InfoBubble_popUp__2jlbZ",fadein:"InfoBubble_fadein__3p9na",type:"InfoBubble_type__21CwN",attributesClass:"InfoBubble_attributesClass__30prR",popUpText:"InfoBubble_popUpText__3TsLD",closeButton:"InfoBubble_closeButton__2onXx",directionsButton:"InfoBubble_directionsButton__1qffu",memorialName:"InfoBubble_memorialName__kSJ2R"}},32:function(e,a,t){e.exports={Map:"Map_Map__1z8ch"}},33:function(e,a,t){e.exports=t(77)},38:function(e,a,t){},7:function(e,a,t){e.exports={Memorial:"Memorial_Memorial__GlNz6",hidden:"Memorial_hidden__37orZ",icon:"Memorial_icon__1ZYCh",memorialInfo:"Memorial_memorialInfo__2XpZa"}},77:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(12),i=t.n(r),l=(t(38),t(11)),c=t(3),s=t(4),u=t(6),m=t(5),d=t(30),p=t.n(d),b=t(31),h=t.n(b),f=function(e){var a=null,t=null;return e.Type.Attributes.forEach((function(e){"latitude"===e.Name.toLowerCase()&&(a=e.Value),"longitude"===e.Name.toLowerCase()&&(t=e.Value)})),{lat:a,lng:t}},_=t(8),C=t.n(_),g=t(2),v=t.n(g),k=function(e){var a=[];return e.hideBubble?a.push(v.a.hidden):a.push(v.a.popUp),o.a.createElement("div",{className:a.join("")},o.a.createElement("div",{className:v.a.type},e.type,o.a.createElement("button",{className:v.a.closeButton,onClick:e.closeBubbleClick},"x")),o.a.createElement("div",{className:v.a.popUpText},o.a.createElement("div",{className:v.a.memorialName},e.Name),e.Type.Attributes.map((function(e){return o.a.createElement("div",{className:v.a.attributesClass,key:e.Id},e.Name,": ",e.Value)})),o.a.createElement("button",{className:v.a.directionsButton,onClick:e.onDirectionsClick},"Take me here")))},I=function(e){var a=[];e.hideIcon?a.push(C.a.hidden):a.push(C.a.IconImage);return o.a.createElement("div",{className:C.a.icon},o.a.createElement("img",{className:a.join(" "),src:"./icons/memorial.png",alt:"memorial icon",onClick:e.onIconClick}),o.a.createElement(k,{Type:e.Type,Name:e.Name,closeBubbleClick:e.closeBubbleClick,hideBubble:e.hideBubble,onDirectionsClick:function(){return function(e,a){var t="https://www.google.com/maps/dir/?api=1&origin=&destination=".concat(e,",").concat(a,"&travelmode=driving");window.open(t,"_blank").focus(window)}(e.lat,e.lng)},type:e.type}))},N=t(32),y=t.n(N),E=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:y.a.Map},o.a.createElement(x.Consumer,null,(function(a){return o.a.createElement(h.a,{bootstrapURLKeys:{key:""},center:a,defaultZoom:14},e.props.Memorials.map((function(a){var t=f(a);return o.a.createElement(I,{key:a.Id,lat:t.lat,lng:t.lng,typeName:a.Type.Name,Type:a.Type,Name:a.Name,hideIcon:a.hideIcon,hideBubble:a.hideBubble,onIconClick:function(){return e.props.onIconClick(a.Id)},closeBubbleClick:function(){return e.props.bubbleCloseClick()}})})))})))}}]),t}(o.a.Component),M=t(7),B=t.n(M),S=function(e){var a=[];return e.hide?a.push(B.a.hidden):a.push(B.a.Memorial),o.a.createElement("div",{className:a.join(" "),onClick:function(){return e.onSidebarClick(e.Id)}},o.a.createElement("img",{className:B.a.icon,src:"./icons/memorial.png",alt:"memorial type icon"}),o.a.createElement("div",{className:B.a.memorialInfo},o.a.createElement("div",null,e.Name)))},w=t(9),j=t.n(w),T=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=a.call.apply(a,[this].concat(o))).state={lastClickedCoordinates:{lat:0,lng:0}},e.onSidebarClick=function(a){var t={lat:0,lng:0};e.props.Memorials.forEach((function(n){n.Id===a&&(t=f(n),e.setState({lastClickedCoordinates:t}))})),e.props.onSidebarClick(t)},e}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:j.a.Sidebar},o.a.createElement("input",{onChange:function(a){return e.props.searchHandler(a.target.value)},className:j.a.SearchInput,type:"text",placeholder:"What are you looking for?"}),o.a.createElement(x.Provider,{value:this.state.lastClickedCoordinates},o.a.createElement("div",{className:j.a.ScrollMenu},this.props.Memorials.map((function(a){return o.a.createElement(S,{key:a.Id,Id:a.Id,Name:a.Name,Type:a.Type,hide:a.hideIcon,onSidebarClick:e.onSidebarClick})})))))}}]),t}(o.a.Component),L=t(10),O=t.n(L),x=o.a.createContext(),A=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=a.call.apply(a,[this].concat(o))).state={Memorials:[{Id:"",Type:{Id:"",Name:"",Attributes:[{Id:"",Name:"",ValueType:"",Required:null,Value:""}]}}],error:null,isLoading:!0,mapCenter:{lat:0,lng:0}},e.searchHandler=function(a){var t=Object(l.a)(e.state.Memorials);t.forEach((function(e){var t=!0;e.Name.toLowerCase().includes(a.trim().toLowerCase())&&(t=!1),e.hideIcon=t,e.hideIcon&&(e.hideBubble=!0)})),e.setState({Memorials:t})},e.onIconClick=function(a){var t=Object(l.a)(e.state.Memorials);t.forEach((function(e){e.hideBubble=!0,e.Id===a&&(e.hideBubble=!1)})),e.setState({Memorials:t})},e.bubbleCloseClickHandler=function(){var a=Object(l.a)(e.state.Memorials);a.map((function(e){e.hideBubble=!0})),e.setState({Memorials:a})},e.getUserLocation=function(){navigator.geolocation.getCurrentPosition((function(a){a?e.setState({mapCenter:{lat:a.coords.latitude,lng:a.coords.longitude}}):alert("Unable to get geolocation..")}))},e.updateMapCenter=function(a){return e.setState({mapCenter:a})},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("http://localhost:1337/memorials/types/attributes/values").then((function(a){console.log("DATA",a.data),e.setState({Memorials:a.data.map((function(e){return e.hideIcon=!1,e.hideBubble=!0,e})),isLoading:!1,mapCenter:e.getUserLocation()})}),(function(a){e.setState({isLoading:!1,error:a})}))}},{key:"render",value:function(){return this.state.error?o.a.createElement("div",{className:O.a.error},"Oops, something's not right here..."):this.state.isLoading?o.a.createElement("h1",{className:O.a.loadingMessage},"Loading..."):o.a.createElement("div",{className:O.a.App},o.a.createElement(x.Provider,{value:this.state.mapCenter},o.a.createElement(E,{Memorials:this.state.Memorials,currentLocation:this.state.currentLocation,onIconClick:this.onIconClick,bubbleCloseClick:this.bubbleCloseClickHandler}),o.a.createElement(T,{Memorials:this.state.Memorials,searchHandler:this.searchHandler,onSidebarClick:this.updateMapCenter})))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,a,t){e.exports={IconImage:"Icon_IconImage__mbUDs",hidden:"Icon_hidden__kglWb"}},9:function(e,a,t){e.exports={Sidebar:"Sidebar_Sidebar__2p9Yo",SearchInput:"Sidebar_SearchInput__2kJ0u",ScrollMenu:"Sidebar_ScrollMenu__3qoGw"}}},[[33,1,2]]]);
//# sourceMappingURL=main.27a6e1b0.chunk.js.map